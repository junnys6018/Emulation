# Alternative GNU Make project makefile autogenerated by Premake

.PHONY: clean prebuild

# Configurations
# #############################################

TARGETDIR = static
TARGET = $(TARGETDIR)/emu.js
OBJDIR = bin-int
DEFINES +=
INCLUDES += -I../core/src
FORCE_INCLUDE +=
ALL_CFLAGS += $(DEFINES) $(INCLUDES) -O3 -w
LINKCMD = $(CC) $(OBJECTS) -O3 -o $(TARGET) --preload-file package -s\
EXPORTED_FUNCTIONS='["_LoadRom", "_EmulateUntil", "_GetFrameBuffer", "_SetKeys", "_GetAudioBuffer", "_FlushAudioSamples", "_GetTotalPPUCycles"]' -s EXPORTED_RUNTIME_METHODS='["cwrap"]'
define PREBUILDCMDS
endef
define PRELINKCMDS
endef
define POSTBUILDCMDS
endef

# Per File Configurations
# #############################################


# File sets
# #############################################

GENERATED :=
OBJECTS :=

GENERATED += $(OBJDIR)/2A03.o
GENERATED += $(OBJDIR)/2C02.o
GENERATED += $(OBJDIR)/2C02_Bus.o
GENERATED += $(OBJDIR)/6502.o
GENERATED += $(OBJDIR)/6502_Bus.o
GENERATED += $(OBJDIR)/Cartridge.o
GENERATED += $(OBJDIR)/Gamepad.o
GENERATED += $(OBJDIR)/MapperUtils.o
GENERATED += $(OBJDIR)/Mapper_000.o
GENERATED += $(OBJDIR)/Mapper_001.o
GENERATED += $(OBJDIR)/Mapper_002.o
GENERATED += $(OBJDIR)/Mapper_003.o
GENERATED += $(OBJDIR)/Mapper_004.o
GENERATED += $(OBJDIR)/Mapper_JUN.o
GENERATED += $(OBJDIR)/api.o
GENERATED += $(OBJDIR)/cheatcode.o
GENERATED += $(OBJDIR)/nes.o
OBJECTS += $(OBJDIR)/2A03.o
OBJECTS += $(OBJDIR)/2C02.o
OBJECTS += $(OBJDIR)/2C02_Bus.o
OBJECTS += $(OBJDIR)/6502.o
OBJECTS += $(OBJDIR)/6502_Bus.o
OBJECTS += $(OBJDIR)/Cartridge.o
OBJECTS += $(OBJDIR)/Gamepad.o
OBJECTS += $(OBJDIR)/MapperUtils.o
OBJECTS += $(OBJDIR)/Mapper_000.o
OBJECTS += $(OBJDIR)/Mapper_001.o
OBJECTS += $(OBJDIR)/Mapper_002.o
OBJECTS += $(OBJDIR)/Mapper_003.o
OBJECTS += $(OBJDIR)/Mapper_004.o
OBJECTS += $(OBJDIR)/Mapper_JUN.o
OBJECTS += $(OBJDIR)/api.o
OBJECTS += $(OBJDIR)/cheatcode.o
OBJECTS += $(OBJDIR)/nes.o

# Rules
# #############################################

all: $(TARGET)
	@:

$(TARGET): $(GENERATED) $(OBJECTS) $(LDDEPS) | $(TARGETDIR)
	$(PRELINKCMDS)
	@echo Linking emu
	$(LINKCMD)
	$(POSTBUILDCMDS)

$(TARGETDIR):
	@echo Creating $(TARGETDIR)
	mkdir -p $(TARGETDIR)

$(OBJDIR):
	@echo Creating $(OBJDIR)
	mkdir -p $(OBJDIR)

clean:
	@echo Cleaning Web-Build
	rm -f  $(TARGET)
	rm -f  $(TARGETDIR)/emu.wasm
	rm -f  $(TARGETDIR)/emu.data
	rm -rf $(GENERATED)
	rm -rf $(OBJDIR)


prebuild: | $(OBJDIR)
	$(PREBUILDCMDS)

$(OBJECTS): | prebuild


# File Rules
# #############################################

$(OBJDIR)/2A03.o: ../core/src/2A03.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/2C02.o: ../core/src/2C02.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/2C02_Bus.o: ../core/src/2C02_Bus.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/6502.o: ../core/src/6502.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/6502_Bus.o: ../core/src/6502_Bus.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Cartridge.o: ../core/src/Cartridge.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/cheatcode.o: ../core/src/Cheatcodes/cheatcode.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Gamepad.o: ../core/src/Gamepad.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/MapperUtils.o: ../core/src/Mappers/MapperUtils.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_000.o: ../core/src/Mappers/Mapper_000.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_001.o: ../core/src/Mappers/Mapper_001.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_002.o: ../core/src/Mappers/Mapper_002.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_003.o: ../core/src/Mappers/Mapper_003.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_004.o: ../core/src/Mappers/Mapper_004.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/Mapper_JUN.o: ../core/src/Mappers/Mapper_JUN.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/nes.o: ../core/src/nes.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
$(OBJDIR)/api.o: api.c
	@echo $(notdir $<)
	$(CC) $(ALL_CFLAGS) $(FORCE_INCLUDE) -o "$@" -c "$<"
